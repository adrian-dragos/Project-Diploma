<div class="lesson-page-wrapper">
  <div class="lesson-wrapper">
    <div class="lesson-header">
      <h3 class="lesson-header-title"> My Lessons</h3>
    </div>
    <app-loading-spinner *ngIf="isLoading" class="loader"></app-loading-spinner>
    <div [ngClass]="{'hidden-lesson-content': isLoading}">
      <mat-divider></mat-divider>
      <table matSort mat-table [dataSource]="dataSource" matSortActive="date" matSortDirection="desc">
        <ng-container matColumnDef="date">
          <th mat-sort-header="date" disableClear mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let lesson">{{ lesson.startTime | date : 'EEEE, MMMM d, y'}}</td>
        </ng-container>
        <ng-container matColumnDef="time">
          <th mat-header-cell *matHeaderCellDef>Time</th>
          <td mat-cell *matCellDef="let lesson">
            {{ lesson.startTime | date : 'h:mm a' }} - {{ lesson.endTime | date : 'h:mm a' }}</td>
        </ng-container>
        <ng-container matColumnDef="location">
          <th mat-header-cell *matHeaderCellDef>Location</th>
          <td mat-cell *matCellDef="let lesson">{{ lesson.location }}</td>
        </ng-container>
        <ng-container matColumnDef="instructor">
          <th mat-header-cell *matHeaderCellDef>Instructor</th>
          <td mat-cell *matCellDef="let lesson">{{ lesson.instructorName }}</td>
        </ng-container>
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let lesson"
            [ngClass]="lesson.status == lessonCompleted ? 'completed-status' : 'upcoming-status'">
            {{ getLessonStatus(lesson.status) }}
          </td>
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let lesson">
            <button *ngIf="lesson.status !== lessonCompleted" mat-icon-button (click)="deleteLesson(lesson.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          [ngClass]="{'completed-lesson-row': row.status== lessonCompleted}"></tr>
      </table>
      <mat-paginator [length]="totalCount" [pageIndex]="pageIndex" [pageSizeOptions]="pageSizeOptions"
        showFirstLastButtons [pageSize]="pageSize">
      </mat-paginator>
    </div>
  </div>
</div>